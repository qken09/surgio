(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{212:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"template-模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#template-模板","aria-hidden":"true"}},[t._v("#")]),t._v(" Template 模板")]),t._v(" "),a("p",[t._v("Surgio 为了能够灵活地定义模板而引入了 "),a("a",{attrs:{href:"https://nunjucks.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nunjucks"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("需要注意的是文件名即为该 Template 的名称，后面在定义 Artifact 时会用到。")]),t._v(" "),a("p",[t._v("目录中默认已经包含针对 Surge，Quantumult 和 Clash 的模板和一些网友维护的规则片段 Snippet。")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("欢迎大家参与到默认规则的修订中！")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/geekdada/create-surgio-store/tree/master/template/template",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目地址"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"模板变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板变量","aria-hidden":"true"}},[t._v("#")]),t._v(" 模板变量")]),t._v(" "),a("h3",{attrs:{id:"providername"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#providername","aria-hidden":"true"}},[t._v("#")]),t._v(" providerName")]),t._v(" "),a("p",[t._v("当前 Provider 的名称。")]),t._v(" "),a("h3",{attrs:{id:"downloadurl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#downloadurl","aria-hidden":"true"}},[t._v("#")]),t._v(" downloadUrl")]),t._v(" "),a("p",[t._v("当前文件对应的订阅地址。")]),t._v(" "),a("h3",{attrs:{id:"nodelist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodelist","aria-hidden":"true"}},[t._v("#")]),t._v(" nodeList")]),t._v(" "),a("p",[t._v("过滤之后的节点列表。")]),t._v(" "),a("h3",{attrs:{id:"remotesnippets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remotesnippets","aria-hidden":"true"}},[t._v("#")]),t._v(" remoteSnippets")]),t._v(" "),a("p",[t._v("远程模板片段。假如你已经配置了一个像 "),a("router-link",{attrs:{to:"/guide/custom-config.html#remotesnippets"}},[t._v("这样")]),t._v(" 的远程片段，那就能够以下面的方式使用。")],1),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{{ remoteSnippets.cn.main('DIRECT') }}\n")])])]),a("p",[t._v("生成的内容如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# China Apps\nUSER-AGENT,MicroMessenger Client,DIRECT\nUSER-AGENT,WeChat*,DIRECT\nUSER-AGENT,MApi*,DIRECT // Dianping\n# Ali\nDOMAIN-KEYWORD,alipay,DIRECT\nDOMAIN-KEYWORD,taobao,DIRECT\nDOMAIN-KEYWORD,alicdn,DIRECT\nDOMAIN-KEYWORD,aliyun,DIRECT\nDOMAIN-KEYWORD,.tmall.,DIRECT\n# China\nDOMAIN-SUFFIX,CN,DIRECT\nDOMAIN-KEYWORD,baidu,DIRECT\n")])])]),a("p",[t._v("如果你需要直接读取远程片段的内容，可以在模板里这样写：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{{ remoteSnippets.cn.text }}\n")])])]),a("h3",{attrs:{id:"customparams"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customparams","aria-hidden":"true"}},[t._v("#")]),t._v(" customParams")]),t._v(" "),a("p",[t._v("获取自定义的模板参数。请先在 Artifact 中定义再使用。")]),t._v(" "),a("h3",{attrs:{id:"clashproxyconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clashproxyconfig","aria-hidden":"true"}},[t._v("#")]),t._v(" clashProxyConfig")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("支持输出 Shadowsocks, Shadowsocksr, Vmess 节点")]),t._v(" "),a("li",[t._v("Shadowsocksr 是通过 Clashr 项目支持的，你需要在 "),a("a",{attrs:{href:"https://t.me/clashr4ssr",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v(" 下载可执行文件。项目地址在 "),a("a",{attrs:{href:"https://github.com/sun8911879/shadowsocksR",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("p",[t._v("Clash 的 "),a("code",[t._v("Proxy")]),t._v(" 和 "),a("code",[t._v("Proxy Group")]),t._v(" 配置对象。"),a("code",[t._v("clashProxyConfig")]),t._v(" 的内容依赖 Artifact 的 "),a("router-link",{attrs:{to:"/guide/custom-artifact.html#proxygroupmodifier-nodelist-filters"}},[a("code",[t._v("proxyGroupModifier")]),t._v(" 函数")]),t._v("。")],1),t._v(" "),a("p",[t._v("由于很难在模板中直接书写 Yaml 格式的文本，所以引入了一个特殊的变量用来存储 Clash 的节点配置，然后利用 Nunjucks 的 "),a("a",{attrs:{href:"https://nunjucks.bootcss.com/templating.html#part-cda1d805a3577fa5",target:"_blank",rel:"noopener noreferrer"}},[t._v("filter"),a("OutboundLink")],1),t._v(" 来输出 Yaml 格式文本。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{{ clashProxyConfig | yaml }}\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("你当然可以在模板中使用 Nunjucks 内置的 filter。")])]),t._v(" "),a("h3",{attrs:{id:"如何在模板中使用变量？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何在模板中使用变量？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何在模板中使用变量？")]),t._v(" "),a("p",[t._v("相信聪明的你已经洞察一切。对，就是用 "),a("code",[t._v(t._s())]),t._v(" 把变量包裹起来。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("{{ downloadUrl }}\n")])])]),a("h2",{attrs:{id:"过滤器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过滤器","aria-hidden":"true"}},[t._v("#")]),t._v(" 过滤器")]),t._v(" "),a("h3",{attrs:{id:"国家和地区过滤器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#国家和地区过滤器","aria-hidden":"true"}},[t._v("#")]),t._v(" 国家和地区过滤器")]),t._v(" "),a("p",[t._v("Surgio 内置多个节点名国别/地区过滤器。除非是火星文，Surgio 应该都能识别出来。它们是：")]),t._v(" "),a("ul",[a("li",[t._v("hkFilter")]),t._v(" "),a("li",[t._v("usFilter")]),t._v(" "),a("li",[t._v("japanFilter")]),t._v(" "),a("li",[t._v("singaporeFilter")]),t._v(" "),a("li",[t._v("koreaFilter")]),t._v(" "),a("li",[t._v("taiwanFilter")])]),t._v(" "),a("h3",{attrs:{id:"netflixfilter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netflixfilter","aria-hidden":"true"}},[t._v("#")]),t._v(" netflixFilter")]),t._v(" "),a("p",[t._v("Netflix 节点过滤器。Surgio 默认会将名称中包含 "),a("em",[t._v("netflix")]),t._v(", "),a("em",[t._v("hkbn")]),t._v(", "),a("em",[t._v("hkt")]),t._v(", "),a("em",[t._v("hgc")]),t._v("（不分大小写）的节点过滤出来。如果在 Provider 中进行了覆盖则会运行新的方法。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/geekdada/surgio/blob/master/lib/utils/filter.ts#L38",target:"_blank",rel:"noopener noreferrer"}},[t._v("内置方法定义"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"youtubepremiumfilter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#youtubepremiumfilter","aria-hidden":"true"}},[t._v("#")]),t._v(" youtubePremiumFilter")]),t._v(" "),a("p",[t._v("Youtube Premium 节点过滤器。Surgio 默认会将名称中包含 "),a("em",[t._v("日")]),t._v(", "),a("em",[t._v("美")]),t._v(", "),a("em",[t._v("韩")]),t._v(", 🇯🇵, 🇺🇸, 🇰🇷 的节点过滤出来。如果在 Provider 中进行了覆盖则会运行新的方法。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/geekdada/surgio/blob/master/lib/utils/filter.ts#L81",target:"_blank",rel:"noopener noreferrer"}},[t._v("内置方法定义"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://support.google.com/youtube/answer/6307365?hl=zh-Hans",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看所有支持 Youtube Premium 的国家和地区"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"customfilters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customfilters","aria-hidden":"true"}},[t._v("#")]),t._v(" customFilters")]),t._v(" "),a("p",[t._v("获取自定义 Filter。关于自定义 Filter 的用法，请阅读 "),a("a",{attrs:{href:"/guide/advance/custom-filter"}},[t._v("进阶 - 自定义 Filter")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"如何使用过滤器？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用过滤器？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何使用过滤器？")]),t._v(" "),a("p",[t._v("我们以 "),a("code",[t._v("getSurgeNodes")]),t._v(" 为例。默认情况下，使用 "),a("code",[t._v("getSurgeNodes(nodeList)")]),t._v(" 输出的是所有节点。如果我们在第二个参数的位置传入过滤器，即可过滤想要的节点。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- .tpl 文件 --\x3e")]),t._v("\n{{ getSurgeNodes(nodeList, netflixFilter) }}\n")])])]),a("p",[t._v("这样即可输出支持 Netflix 的节点。")]),t._v(" "),a("h2",{attrs:{id:"模板方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 模板方法")]),t._v(" "),a("h3",{attrs:{id:"getsurgenodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getsurgenodes","aria-hidden":"true"}},[t._v("#")]),t._v(" getSurgeNodes")]),t._v(" "),a("p",[a("code",[t._v("getSurgeNodes(nodeList, filter?)")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("filter")]),t._v(" 为可选参数")]),t._v(" "),a("li",[t._v("支持输出 Shadowsocks, Shadowsocksr, HTTPS, Snell, Vmess 节点")]),t._v(" "),a("li",[t._v("请参考 "),a("router-link",{attrs:{to:"/guide/advance/surge-advance.html"}},[t._v("「Surge 进阶使用」")]),t._v(" 生成针对 Surge 的 SSR 订阅")],1)])]),t._v(" "),a("p",[t._v("生成 Surge 规范的节点列表，例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("🇺🇸US = custom, us.example.com, 10000, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true, obfs=tls, obfs-host=gateway-carry.icloud.com\n🇭🇰HK(Netflix) = custom, hk.example.com, 10000, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true\n")])])]),a("h3",{attrs:{id:"getshadowsocksnodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getshadowsocksnodes","aria-hidden":"true"}},[t._v("#")]),t._v(" getShadowsocksNodes")]),t._v(" "),a("p",[a("code",[t._v("getShadowsocksNodes(nodeList, providerName)")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("第二个入参为 Group 名称")])])]),t._v(" "),a("p",[t._v("生成 Shadowsocks Scheme 列表，例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ss://cmM0LW1kNTpwYXNzd29yZA@us.com:1234/?group=subscribe_demo#%F0%9F%87%BA%F0%9F%87%B8%20US\nss://cmM0LW1kNTpwYXNzd29yZA@hk.com:1234/?group=subscribe_demo#%F0%9F%87%AD%F0%9F%87%B0%20HK\n")])])]),a("p",[t._v("你可以使用 "),a("code",[t._v("base64")]),t._v(" filter 来将上面的文本转换成 Quantumult 能够识别的订阅内容。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- .tpl 文件 --\x3e")]),t._v("\n{{ getShadowsocksNodes(nodeList, providerName) | base64 }}\n")])])]),a("h3",{attrs:{id:"getquantumultnodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getquantumultnodes","aria-hidden":"true"}},[t._v("#")]),t._v(" getQuantumultNodes")]),t._v(" "),a("p",[a("code",[t._v("getQuantumultNodes(nodeList, providerName?, filter?)")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("第二个参数为 Group 名称，可选")]),t._v(" "),a("li",[t._v("第三个参数可选，可传入标准的过滤器或自定义的过滤器")]),t._v(" "),a("li",[t._v("支持输出 Shadowsocks, Shadowsocksr, Vmess, HTTPS 节点")])])]),t._v(" "),a("p",[t._v("生成 Quantumult 的节点配置，例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vmess://5rWL6K+VIDEgPSB2bWVzcywxLjEuMS4xLDgwODAsY2hhY2hhMjAtaWV0Zi1wb2x5MTMwNSwiMTM4NmY4NWUtNjU3Yi00ZDZlLTlkNTYtNzhiYWRiNzVlMWZkIiw2NCxncm91cD1TdXJnaW8sb3Zlci10bHM9ZmFsc2UsY2VydGlmaWNhdGU9MSxvYmZzPXdzLG9iZnMtcGF0aD0iLyIsb2Jmcy1oZWFkZXI9Ikhvc3Q6ZXhhbXBsZS5jb21bUnJdW05uXVVzZXItQWdlbnQ6TW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxMl8zXzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTVFMTQ4Ig==\nvmess://5rWL6K+VIDIgPSB2bWVzcywxLjEuMS4xLDgwODAsY2hhY2hhMjAtaWV0Zi1wb2x5MTMwNSwiMTM4NmY4NWUtNjU3Yi00ZDZlLTlkNTYtNzhiYWRiNzVlMWZkIiw2NCxncm91cD1TdXJnaW8sb3Zlci10bHM9ZmFsc2UsY2VydGlmaWNhdGU9MSxvYmZzPXRjcCxvYmZzLXBhdGg9Ii8iLG9iZnMtaGVhZGVyPSJIb3N0OjEuMS4xLjFbUnJdW05uXVVzZXItQWdlbnQ6TW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxMl8zXzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTVFMTQ4Ig==\n")])])]),a("p",[t._v("你可以使用 "),a("code",[t._v("base64")]),t._v(" filter 来将上面的文本转换成 Quantumult 能够识别的订阅内容。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- .tpl 文件 --\x3e")]),t._v("\n{{ getQuantumultNodes(nodeList, providerName) | base64 }}\n")])])]),a("h3",{attrs:{id:"getquantumultxnodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getquantumultxnodes","aria-hidden":"true"}},[t._v("#")]),t._v(" getQuantumultXNodes "),a("Badge",{attrs:{text:"v1.3.0",vertical:"middle"}})],1),t._v(" "),a("p",[a("code",[t._v("getQuantumultXNodes(nodeList, filter?)")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("第二个参数可选，可传入标准的过滤器或自定义的过滤器")]),t._v(" "),a("li",[t._v("支持输出 Shadowsocks, Shadowsocksr, Vmess, HTTPS 节点")]),t._v(" "),a("li",[t._v("支持添加 "),a("code",[t._v("udp-relay")]),t._v(" 和 "),a("code",[t._v("fast-open")]),t._v(" 配置")])])]),t._v(" "),a("p",[t._v("生成 QuantumulX 的节点配置。该配置能用于 "),a("a",{attrs:{href:"https://github.com/crossutility/Quantumult-X/blob/master/sample.conf#L88",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("server_local")]),a("OutboundLink")],1),t._v(" 或者 "),a("a",{attrs:{href:"https://github.com/crossutility/Quantumult-X/blob/master/server-complete.txt",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("server_remote")]),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"getnodenames"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getnodenames","aria-hidden":"true"}},[t._v("#")]),t._v(" getNodeNames")]),t._v(" "),a("p",[a("code",[t._v("getNodeNames(nodeList, filter?)")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("filter")]),t._v(" 为可选参数")])])]),t._v(" "),a("p",[t._v("生成一段逗号分隔的名称字符串，例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("🇺🇸US, 🇭🇰HK(Netflix)\n")])])]),a("p",[t._v("若需要过滤 Netflix 节点则传入：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNodeNames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nodeList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" netflixFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"getdownloadurl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getdownloadurl","aria-hidden":"true"}},[t._v("#")]),t._v(" getDownloadUrl")]),t._v(" "),a("p",[a("code",[t._v("getDownloadUrl(name)")])]),t._v(" "),a("p",[t._v("获得另一个文件的下载地址（链接前面部分取决于 "),a("code",[t._v("surgio.conf.js")]),t._v(" 中 "),a("code",[t._v("urlBase")]),t._v(" 的值），则可以这样写：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDownloadUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example.conf'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://example.com/example.conf")]),t._v("\n")])])]),a("h3",{attrs:{id:"如何在模板中调用方法？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何在模板中调用方法？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何在模板中调用方法？")]),t._v(" "),a("p",[t._v("上面提到的这些模板方法都能够在模板文件中使用。原则就是用 "),a("code",[t._v(t._s())]),t._v(" 把方法包裹起来。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- .tpl 文件 --\x3e")]),t._v("\n{{ getQuantumultNodes(nodeList, providerName) | base64 }}\n\n{{ getSurgeNodes(nodeList) }}\n")])])]),a("h2",{attrs:{id:"片段-snippet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#片段-snippet","aria-hidden":"true"}},[t._v("#")]),t._v(" 片段 (Snippet)")]),t._v(" "),a("p",[t._v("片段是一种特殊的模板，它依赖 Nunjucks 的 "),a("a",{attrs:{href:"https://mozilla.github.io/nunjucks/cn/templating.html#macro",target:"_blank",rel:"noopener noreferrer"}},[t._v("宏（macro）"),a("OutboundLink")],1),t._v(" 来实现。什么是宏不重要，你只要依葫芦画瓢就可以写出自己的「片段」。")]),t._v(" "),a("p",[t._v("我们以 "),a("code",[t._v("snippet")]),t._v(" 目录内的 "),a("code",[t._v("blocked_rules.tpl")]),t._v(" 为例（内容有省略）：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{% macro main(rule) %}\nDOMAIN-KEYWORD,bitly,{{ rule }}\nDOMAIN-KEYWORD,blogspot,{{ rule }}\nDOMAIN-KEYWORD,dropbox,{{ rule }}\nDOMAIN-SUFFIX,twitpic.com,{{ rule }}\nDOMAIN-SUFFIX,youtu.be,{{ rule }}\nDOMAIN-SUFFIX,ytimg.com,{{ rule }}\n{% endmacro %}\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("宏暴露了一个 "),a("code",[t._v("main")]),t._v(" 方法，传入一个字符串变量")]),t._v(" "),a("li",[t._v("你可以使用 Nunjucks 宏的其它特性")])])]),t._v(" "),a("p",[t._v("使用的时候只需要 "),a("code",[t._v("import")]),t._v(" 这个模板：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{% import './snippet/blocked_rules.tpl' as blocked_rules %}\n\n{{ blocked_rules.main('🚀 Proxy') }}\n")])])]),a("p",[t._v("最终得到的规则是：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("DOMAIN-KEYWORD,bitly,🚀 Proxy\nDOMAIN-KEYWORD,blogspot,🚀 Proxy\nDOMAIN-KEYWORD,dropbox,🚀 Proxy\nDOMAIN-SUFFIX,twitpic.com,🚀 Proxy\nDOMAIN-SUFFIX,youtu.be,🚀 Proxy\nDOMAIN-SUFFIX,ytimg.com,🚀 Proxy\n")])])]),a("h3",{attrs:{id:"clash-规则格式处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clash-规则格式处理","aria-hidden":"true"}},[t._v("#")]),t._v(" Clash 规则格式处理")]),t._v(" "),a("p",[t._v("由于 Yaml 的数组类型必须在每一条数据前加 "),a("code",[t._v("-")]),t._v("，所以提供了一个处理函数将规则转换成 Clash 能够识别的数组。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{% import './snippet/blocked_rules.tpl' as blocked_rules %}\n\n{{ blocked_rules.main('🚀 Proxy') | patchYamlArray }}\n")])])]),a("p",[t._v("最终得到的规则是：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("- DOMAIN-KEYWORD,bitly,🚀 Proxy\n- DOMAIN-KEYWORD,blogspot,🚀 Proxy\n- DOMAIN-KEYWORD,dropbox,🚀 Proxy\n- DOMAIN-SUFFIX,twitpic.com,🚀 Proxy\n- DOMAIN-SUFFIX,youtu.be,🚀 Proxy\n- DOMAIN-SUFFIX,ytimg.com,🚀 Proxy\n")])])]),a("p",[t._v("需要注意的是，"),a("code",[t._v("patchYamlArray")]),t._v(" 除了更改格式，还会将 Clash 不支持的规则类型省略，例如：")]),t._v(" "),a("ul",[a("li",[t._v("USER-AGENT")]),t._v(" "),a("li",[t._v("PROCESS-NAME")]),t._v(" "),a("li",[t._v("no-resolve（仅除去该字段，其它部分保留）")])]),t._v(" "),a("h3",{attrs:{id:"quantumultx-规则处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quantumultx-规则处理","aria-hidden":"true"}},[t._v("#")]),t._v(" QuantumultX 规则处理")]),t._v(" "),a("p",[t._v("由于 QuantumultX 目前暂时还不支持 "),a("code",[t._v("URL-REGEX")]),t._v(" 和 "),a("code",[t._v("PROCESS-NAME")]),t._v("，所以需要把这些规则从配置中除去。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("{% import './snippet/blocked_rules.tpl' as blocked_rules %}\n\n{{ blocked_rules.main('🚀 Proxy') | quantumultx }}\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);