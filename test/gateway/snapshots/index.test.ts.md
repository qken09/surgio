# Snapshot report for `test/gateway/index.test.ts`

The actual snapshot is saved in `index.test.ts.snap`.

Generated by [AVA](https://ava.li).

## get artifact

> Snapshot 1

    `🇺🇲 US = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true, obfs=tls, obfs-host=gateway-carry.icloud.com, tfo=true␊
    Snell = snell, us.example.com, 443, psk=password, obfs=tls␊
    HTTPS = https, us.example.com, 443, username, password␊
    🇺🇸US 1 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, obfs=tls, obfs-host=gateway-carry.icloud.com␊
    🇺🇸US 2 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module␊
    ss1 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true␊
    ss2 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=false, obfs=tls, obfs-host=www.bing.com␊
    vmess = vmess, server, 443, username=uuid␊
    http = https, server, 443, username, password␊
    snell = snell, server, 44046, psk=yourpsk, obfs=http␊
    ss4 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=false, obfs=tls, obfs-host=example.com␊
    ----␊
    🇺🇲 US, Snell, HTTPS, 🇺🇸US 1, 🇺🇸US 2, ss1, ss2, vmess, http, snell, ss4␊
    `

## list artifact

> Snapshot 1

    `␊
        ␊
          <li class="artifact">␊
            <div class="inner-wrapper">␊
              <div class="name">test.conf</div>␊
              <pre class="preview">/get-artifact/test.conf?access_token=abcd</pre>␊
              <div class="tag-list clearfix">␊
                ␊
                <div class="tag">Provider: ss</div>␊
                ␊
                ␊
                ␊
                  ␊
                    ␊
                    <div class="tag">Provider: custom</div>␊
                    ␊
                  ␊
                    ␊
                    <div class="tag">Provider: clash</div>␊
                    ␊
                  ␊
                ␊
              </div>␊
              <div class="link-group">␊
                ␊
                ␊
                <a rel="nofollow" class="link pure-button pure-button-primary" target="_blank" href="/get-artifact/test.conf?access_token=abcd&amp;dl=1">下载</a>␊
                <a rel="nofollow" class="link pure-button pure-button-primary" target="_blank" href="/get-artifact/test.conf?access_token=abcd">预览</a>␊
                <button class="ctc link pure-button pure-button-primary" data-clipboard-text="/get-artifact/test.conf?access_token=abcd">复制地址</button>␊
                ␊
                ␊
    ␊
                ␊
              </div>␊
            </div>␊
          </li>␊
        ␊
        `

## qx-rewrite-remote

> Snapshot 1

    `hostname = api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, mp.weixin.qq.com, api.bilibili.com, app.bilibili.com, *.zhihu.com␊
    ␊
    # 去微博应用内广告 (By yichahucha)␊
    ^https?://m?api\\.weibo\\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|\\!/photos/pic_recommend_status) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fyichahucha%2Fsurge%2Fmaster%2Fwb_ad.js␊
    ^https?://(sdk|wb)app\\.uve\\.weibo\\.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fyichahucha%2Fsurge%2Fmaster%2Fwb_launch.js␊
    ␊
    # 去微信公众号广告 (By Choler)␊
    ^https?:\\/\\/mp\\.weixin\\.qq\\.com\\/mp\\/getappmsgad url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FWechat.js␊
    ␊
    # 知乎去广告 (By onewayticket255)␊
    ^https://api.zhihu.com/moments\\?(action|feed_type) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520feed.js␊
    ^https://api.zhihu.com/topstory/recommend url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520recommend.js␊
    ^https://api.zhihu.com/.*/questions url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FSurge%2FJS%2FZhihu-ad-answer.js␊
    ^https://api.zhihu.com/market/header url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520market.js␊
    ␊
    # 哔哩哔哩动画去广告 (By onewayticket255)␊
    ^https://app.bilibili.com/x/resource/show/tab\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FbilibiliTab.js␊
    ^https://app.bilibili.com/x/v2/feed/index\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520feed.js␊
    ^https://app.bilibili.com/x/v2/account/mine\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FbilibiliAccount.js␊
    ^https://app.bilibili.com/x/v2/view\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520view%2520relate.js␊
    ^https://app.bilibili.com/x/v2/rank url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520rank.js␊
    ^https://api.bilibili.com/x/v2/reply/main\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520reply.js␊
    ^https://app.bilibili.com/x/v2/show/popular/index\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520hot.js`

## qx-rewrite-remote with id

> Snapshot 1

    `hostname = api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, mp.weixin.qq.com, api.bilibili.com, app.bilibili.com, *.zhihu.com␊
    ␊
    # 去微博应用内广告 (By yichahucha)␊
    ^https?://m?api\\.weibo\\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|\\!/photos/pic_recommend_status) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fyichahucha%2Fsurge%2Fmaster%2Fwb_ad.js&id=abcde%2Cfghijk␊
    ^https?://(sdk|wb)app\\.uve\\.weibo\\.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fyichahucha%2Fsurge%2Fmaster%2Fwb_launch.js&id=abcde%2Cfghijk␊
    ␊
    # 去微信公众号广告 (By Choler)␊
    ^https?:\\/\\/mp\\.weixin\\.qq\\.com\\/mp\\/getappmsgad url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FWechat.js&id=abcde%2Cfghijk␊
    ␊
    # 知乎去广告 (By onewayticket255)␊
    ^https://api.zhihu.com/moments\\?(action|feed_type) url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520feed.js&id=abcde%2Cfghijk␊
    ^https://api.zhihu.com/topstory/recommend url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520recommend.js&id=abcde%2Cfghijk␊
    ^https://api.zhihu.com/.*/questions url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FSurge%2FJS%2FZhihu-ad-answer.js&id=abcde%2Cfghijk␊
    ^https://api.zhihu.com/market/header url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520zhihu%2520market.js&id=abcde%2Cfghijk␊
    ␊
    # 哔哩哔哩动画去广告 (By onewayticket255)␊
    ^https://app.bilibili.com/x/resource/show/tab\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FbilibiliTab.js&id=abcde%2Cfghijk␊
    ^https://app.bilibili.com/x/v2/feed/index\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520feed.js&id=abcde%2Cfghijk␊
    ^https://app.bilibili.com/x/v2/account/mine\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2FNobyDa%2FScript%2Fmaster%2FQuantumultX%2FFile%2FbilibiliAccount.js&id=abcde%2Cfghijk␊
    ^https://app.bilibili.com/x/v2/view\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520view%2520relate.js&id=abcde%2Cfghijk␊
    ^https://app.bilibili.com/x/v2/rank url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520rank.js&id=abcde%2Cfghijk␊
    ^https://api.bilibili.com/x/v2/reply/main\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520reply.js&id=abcde%2Cfghijk␊
    ^https://app.bilibili.com/x/v2/show/popular/index\\?access_key url script-response-body https://example.com/qx-script?url=https%3A%2F%2Fraw.githubusercontent.com%2Fonewayticket255%2FSurge-Script%2Fmaster%2Fsurge%2520bilibili%2520hot.js&id=abcde%2Cfghijk`

## qx-script

> Snapshot 1

    `/**␊
     * @supported 55BE3B10F8A1␊
     * THIS COMMENT IS GENERATED BY SURGIO␊
     */␊
    ␊
    /**␊
     * @supported 23AD6B11CD4B 55BE3B10F8A1␊
     * The above random generated device ID can be found at the bottom of Quantumult X additional menu, and may be changed when system restored.␊
     * Indicate what device are supported by the file. This is necessary when the file is not loaded from local("On My iPhone - Quantumult X - Scripts").␊
     */␊
    ␊
    // $request, $response, $notify(title, subtitle, message), console.log(message)␊
    // $request.scheme, $request.method, $request.url, $request.path, $request.headers␊
    // $response.statusCode, $response.headers, $response.body␊
    // You can optional change the response headers at the same time by using $done({body: modifiedBody, headers: modifiedHeaders}); only change the response headers is not allowed for script-response-body. The modifiedHeaders can be copied and modified from $response.headers, please do not change the content length, type and encoding field.␊
    // Response status can also be optional changed by using $done({body: modifiedBody, headers: modifiedHeaders, status: modifiedStatus}), the modifiedStatus should be like "HTTP/1.1 200 OK"␊
    ␊
    var body = $response.body;␊
    var obj = JSON.parse(body);␊
    ␊
    obj['result'] = 0;␊
    body = JSON.stringify(obj);␊
    ␊
    console.log(body);␊
    ␊
    $done(body);␊
    `

> Snapshot 2

    `/**␊
     * @supported abcdef␊
     * THIS COMMENT IS GENERATED BY SURGIO␊
     */␊
    ␊
    /**␊
     * @supported 23AD6B11CD4B 55BE3B10F8A1␊
     * The above random generated device ID can be found at the bottom of Quantumult X additional menu, and may be changed when system restored.␊
     * Indicate what device are supported by the file. This is necessary when the file is not loaded from local("On My iPhone - Quantumult X - Scripts").␊
     */␊
    ␊
    // $request, $response, $notify(title, subtitle, message), console.log(message)␊
    // $request.scheme, $request.method, $request.url, $request.path, $request.headers␊
    // $response.statusCode, $response.headers, $response.body␊
    // You can optional change the response headers at the same time by using $done({body: modifiedBody, headers: modifiedHeaders}); only change the response headers is not allowed for script-response-body. The modifiedHeaders can be copied and modified from $response.headers, please do not change the content length, type and encoding field.␊
    // Response status can also be optional changed by using $done({body: modifiedBody, headers: modifiedHeaders, status: modifiedStatus}), the modifiedStatus should be like "HTTP/1.1 200 OK"␊
    ␊
    var body = $response.body;␊
    var obj = JSON.parse(body);␊
    ␊
    obj['result'] = 0;␊
    body = JSON.stringify(obj);␊
    ␊
    console.log(body);␊
    ␊
    $done(body);␊
    `

> Snapshot 3

    `/**␊
     * @supported abcdef bcdefg␊
     * THIS COMMENT IS GENERATED BY SURGIO␊
     */␊
    ␊
    /**␊
     * @supported 23AD6B11CD4B 55BE3B10F8A1␊
     * The above random generated device ID can be found at the bottom of Quantumult X additional menu, and may be changed when system restored.␊
     * Indicate what device are supported by the file. This is necessary when the file is not loaded from local("On My iPhone - Quantumult X - Scripts").␊
     */␊
    ␊
    // $request, $response, $notify(title, subtitle, message), console.log(message)␊
    // $request.scheme, $request.method, $request.url, $request.path, $request.headers␊
    // $response.statusCode, $response.headers, $response.body␊
    // You can optional change the response headers at the same time by using $done({body: modifiedBody, headers: modifiedHeaders}); only change the response headers is not allowed for script-response-body. The modifiedHeaders can be copied and modified from $response.headers, please do not change the content length, type and encoding field.␊
    // Response status can also be optional changed by using $done({body: modifiedBody, headers: modifiedHeaders, status: modifiedStatus}), the modifiedStatus should be like "HTTP/1.1 200 OK"␊
    ␊
    var body = $response.body;␊
    var obj = JSON.parse(body);␊
    ␊
    obj['result'] = 0;␊
    body = JSON.stringify(obj);␊
    ␊
    console.log(body);␊
    ␊
    $done(body);␊
    `

> Snapshot 4

    `/**␊
     * @supported abcdef␊
     * THIS COMMENT IS GENERATED BY SURGIO␊
     */␊
    ␊
    /**␊
     * @supported 23AD6B11CD4B 55BE3B10F8A1␊
     * The above random generated device ID can be found at the bottom of Quantumult X additional menu, and may be changed when system restored.␊
     * Indicate what device are supported by the file. This is necessary when the file is not loaded from local("On My iPhone - Quantumult X - Scripts").␊
     */␊
    ␊
    // $request, $response, $notify(title, subtitle, message), console.log(message)␊
    // $request.scheme, $request.method, $request.url, $request.path, $request.headers␊
    // $response.statusCode, $response.headers, $response.body␊
    // You can optional change the response headers at the same time by using $done({body: modifiedBody, headers: modifiedHeaders}); only change the response headers is not allowed for script-response-body. The modifiedHeaders can be copied and modified from $response.headers, please do not change the content length, type and encoding field.␊
    // Response status can also be optional changed by using $done({body: modifiedBody, headers: modifiedHeaders, status: modifiedStatus}), the modifiedStatus should be like "HTTP/1.1 200 OK"␊
    ␊
    var body = $response.body;␊
    var obj = JSON.parse(body);␊
    ␊
    obj['result'] = 0;␊
    body = JSON.stringify(obj);␊
    ␊
    console.log(body);␊
    ␊
    $done(body);␊
    `

## transform artifact qx

> Snapshot 1

    `shadowsocks=us.example.com:443, method=chacha20-ietf-poly1305, password=password, obfs=tls, obfs-host=gateway-carry.icloud.com, udp-relay=true, fast-open=true, tag=🇺🇲 US␊
    http=us.example.com:443, username=username, password=password, over-tls=true, tag=HTTPS␊
    shadowsocks=us.example.com:443, method=chacha20-ietf-poly1305, password=password, obfs=tls, obfs-host=gateway-carry.icloud.com, tag=🇺🇸US 1␊
    shadowsocks=us.example.com:443, method=chacha20-ietf-poly1305, password=password, tag=🇺🇸US 2␊
    shadowsocks=server:443, method=chacha20-ietf-poly1305, password=password, udp-relay=true, tag=ss1␊
    shadowsocks=server:443, method=chacha20-ietf-poly1305, password=password, obfs=tls, obfs-host=www.bing.com, tag=ss2␊
    vmess=server:443, method=chacha20-ietf-poly1305, password=uuid, udp-relay=true, tag=vmess␊
    http=server:443, username=username, password=password, over-tls=true, tag=http␊
    shadowsocks=server:443, method=chacha20-ietf-poly1305, password=password, obfs=tls, obfs-host=example.com, tag=ss4`

> Snapshot 2

    'shadowsocks=us.example.com:443, method=chacha20-ietf-poly1305, password=password, obfs=tls, obfs-host=gateway-carry.icloud.com, udp-relay=true, fast-open=true, tag=🇺🇲 US'

## transform artifact surge

> Snapshot 1

    `🇺🇲 US = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true, obfs=tls, obfs-host=gateway-carry.icloud.com, tfo=true␊
    Snell = snell, us.example.com, 443, psk=password, obfs=tls␊
    HTTPS = https, us.example.com, 443, username, password␊
    🇺🇸US 1 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, obfs=tls, obfs-host=gateway-carry.icloud.com␊
    🇺🇸US 2 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module␊
    ss1 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true␊
    ss2 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=false, obfs=tls, obfs-host=www.bing.com␊
    vmess = vmess, server, 443, username=uuid␊
    http = https, server, 443, username, password␊
    snell = snell, server, 44046, psk=yourpsk, obfs=http␊
    ss4 = custom, server, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=false, obfs=tls, obfs-host=example.com`

> Snapshot 2

    `🇺🇸US 1 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, obfs=tls, obfs-host=gateway-carry.icloud.com␊
    🇺🇸US 2 = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module␊
    🇺🇲 US = custom, us.example.com, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, udp-relay=true, obfs=tls, obfs-host=gateway-carry.icloud.com, tfo=true`
